{% extends "../layouts/base.twig" %}

{% block title %}
	<title>Gestion des employés</title>
{% endblock %}

{% block main %}
	<main class="p-8 bg-[#f6f5f2] min-h-screen">
		<h2 class="text-2xl font-bold mb-6 text-taupe-700">Employés</h2>
		<form method="post" action="/employes/add" class="mb-8 grid grid-cols-1 md:grid-cols-2 gap-4 bg-white/80 p-4 rounded-lg shadow">
			<input type="text" name="nom" placeholder="Nom" required class="px-2 py-1 rounded border border-taupe-200 bg-gray-100"/>
			<input type="text" name="prenom" placeholder="Prénom" required class="px-2 py-1 rounded border border-taupe-200 bg-gray-100"/>
			<input type="email" name="mail" placeholder="Mail" required class="px-2 py-1 rounded border border-taupe-200 bg-gray-100"/>
			<input type="password" name="password" placeholder="Mot de passe" required class="px-2 py-1 rounded border border-taupe-200 bg-gray-100"/>
			<input type="number" name="age" placeholder="Âge (optionnel)" class="px-2 py-1 rounded border border-taupe-200 bg-gray-100"/>
			<input type="text" name="genre" placeholder="Genre (optionnel)" class="px-2 py-1 rounded border border-taupe-200 bg-gray-100"/>
			<button type="submit" class="col-span-1 md:col-span-2 py-2 rounded bg-taupe-700 text-white font-semibold hover:bg-taupe-500 transition">Ajouter</button>
		</form>
		<div class="grid grid-cols-1 md:grid-cols-3 gap-6">
			{% for emp in employes %}
				<div class="bg-[#d6c3b0] rounded-xl shadow p-4 flex flex-col items-center">
					<div class="text-lg font-bold text-taupe-700">{{ emp.prenom }}
						{{ emp.nom }}</div>
					<div class="text-sm text-gray-700 mb-2">{{ emp.mail }}</div>
					{% if emp.age %}
						<div class="text-xs text-gray-500">Âge :
							{{ emp.age }}</div>
					{% endif %}
					{% if emp.genre %}
						<div class="text-xs text-gray-500">Genre :
							{{ emp.genre }}</div>
					{% endif %}
					<div class="flex gap-2 mt-4">

						<form method="post" action="/employes/edit/{{ emp.id }}" class="flex gap-2 items-center">
							<input type="text" name="nom" value="{{ emp.nom }}" required class="px-2 py-1 rounded border border-taupe-200 bg-gray-100 w-20"/>
							<input type="text" name="prenom" value="{{ emp.prenom }}" required class="px-2 py-1 rounded border border-taupe-200 bg-gray-100 w-20"/>
							<input type="email" name="mail" value="{{ emp.mail }}" required class="px-2 py-1 rounded border border-taupe-200 bg-gray-100 w-32"/>
							<input type="number" name="age" value="{{ emp.age }}" class="px-2 py-1 rounded border border-taupe-200 bg-gray-100 w-14"/>
							<input type="text" name="genre" value="{{ emp.genre }}" class="px-2 py-1 rounded border border-taupe-200 bg-gray-100 w-14"/>
							<button type="submit" class="px-3 py-1 rounded bg-blue-400 text-white hover:bg-blue-600 transition">Modifier</button>
						</form>

						<form method="post" action="/employes/delete/{{ emp.id }}">
							<button type="submit" class="px-3 py-1 rounded bg-red-400 text-white hover:bg-red-600 transition">Supprimer</button>
						</form>
					</div>
				</div>
			{% endfor %}
		</div>
	</main>
{% endblock %}
